{% extends "industry_base.html" %}

{% block title %}Help & Support - Industry Portal{% endblock %}

{% block main_content %}
<div class="container-fluid px-4">
    <div class="row">
        <!-- Help Header -->
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h3 mb-0 text-gray-800">Help & Support</h1>
                    <p class="text-muted">Get assistance with using the Industry Carbon Credits Portal</p>
                </div>
                <div>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#contactModal">
                        <i class="fas fa-envelope me-2"></i>Contact Support
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card border-left-primary h-100">
                <div class="card-body text-center">
                    <i class="fas fa-book fa-2x text-primary mb-2"></i>
                    <h6>User Guide</h6>
                    <p class="text-muted small">Complete walkthrough</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card border-left-success h-100">
                <div class="card-body text-center">
                    <i class="fas fa-video fa-2x text-success mb-2"></i>
                    <h6>Video Tutorials</h6>
                    <p class="text-muted small">Step-by-step videos</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card border-left-warning h-100">
                <div class="card-body text-center">
                    <i class="fas fa-question-circle fa-2x text-warning mb-2"></i>
                    <h6>FAQ</h6>
                    <p class="text-muted small">Common questions</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card border-left-info h-100">
                <div class="card-body text-center">
                    <i class="fas fa-phone fa-2x text-info mb-2"></i>
                    <h6>Live Support</h6>
                    <p class="text-muted small">Chat with our team</p>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Frequently Asked Questions</h6>
                </div>
                <div class="card-body">
                    <div class="accordion" id="faqAccordion">
                        <!-- Account & Setup -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                                    How do I set up my industry account?
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To set up your industry account:</p>
                                    <ol>
                                        <li>Click "Register" on the industry portal login page</li>
                                        <li>Fill out the comprehensive registration form with your company details</li>
                                        <li>Submit required documents (CIN, PAN, GST certificates)</li>
                                        <li>Wait for admin verification (typically 3-5 business days)</li>
                                        <li>Once verified, you'll receive login credentials via email</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Purchasing Credits -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                    How do I purchase carbon credits?
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To purchase carbon credits:</p>
                                    <ol>
                                        <li>Navigate to the "Marketplace" section</li>
                                        <li>Browse available blue carbon projects</li>
                                        <li>Click on a project to view details</li>
                                        <li>Select "Buy Credits" and specify quantity</li>
                                        <li>Choose payment method and complete transaction</li>
                                        <li>Credits will be added to your portfolio immediately</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Credit Management -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                                    How do I retire credits for offsetting?
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To retire carbon credits:</p>
                                    <ol>
                                        <li>Go to "My Credits" section</li>
                                        <li>Find the transaction you want to retire</li>
                                        <li>Click "Retire" button</li>
                                        <li>Confirm retirement - this action is irreversible</li>
                                        <li>Retired credits count towards your emission offsetting</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Reporting -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                                    How do I generate compliance reports?
                                </button>
                            </h2>
                            <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>To generate compliance reports:</p>
                                    <ol>
                                        <li>Visit the "Reports" section</li>
                                        <li>Select report type (Annual, Quarterly, Custom)</li>
                                        <li>Choose date range if applicable</li>
                                        <li>Click "Generate Report"</li>
                                        <li>Download PDF or CSV format</li>
                                        <li>Reports include all purchase and retirement data</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Troubleshooting -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFive">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive">
                                    What if my payment fails but amount is debited?
                                </button>
                            </h2>
                            <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <p>If your payment fails but amount is debited:</p>
                                    <ol>
                                        <li>Check your transaction history in "My Credits"</li>
                                        <li>If transaction shows "Failed" status, amount will be auto-refunded in 3-5 business days</li>
                                        <li>For immediate resolution, contact support with transaction ID</li>
                                        <li>Keep payment receipt/bank statement for reference</li>
                                        <li>Our team will manually verify and process refund if needed</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Support -->
        <div class="col-lg-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Contact Information</h6>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-headset fa-3x text-primary mb-2"></i>
                        <h5>Need More Help?</h5>
                        <p class="text-muted">Our support team is here to assist you</p>
                    </div>
                    
                    <div class="mb-3">
                        <h6><i class="fas fa-envelope text-primary me-2"></i>Email Support</h6>
                        <p class="text-muted">support@bluecarbon.mrv</p>
                        <small>Response within 24 hours</small>
                    </div>
                    
                    <div class="mb-3">
                        <h6><i class="fas fa-phone text-success me-2"></i>Phone Support</h6>
                        <p class="text-muted">+91-1800-123-4567</p>
                        <small>Mon-Fri, 9 AM - 6 PM</small>
                    </div>
                    
                    <div class="mb-3">
                        <h6><i class="fas fa-comments text-info me-2"></i>Live Chat</h6>
                        <p class="text-muted">Available on dashboard</p>
                        <small>Instant responses</small>
                    </div>
                    
                    <button class="btn btn-primary btn-block" data-bs-toggle="modal" data-bs-target="#contactModal">
                        <i class="fas fa-paper-plane me-2"></i>Send Message
                    </button>
                </div>
            </div>

            <!-- System Status -->
            <div class="card shadow mt-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-success">System Status</h6>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>API Services</span>
                        <span class="badge badge-success">Operational</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>Payment Gateway</span>
                        <span class="badge badge-success">Operational</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>Blockchain Network</span>
                        <span class="badge badge-success">Operational</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span>Notification System</span>
                        <span class="badge badge-success">Operational</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Contact Support Modal -->
<div class="modal fade" id="contactModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Contact Support</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="supportForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="support_name" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="support_name" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="support_email" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="support_email" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="support_subject" class="form-label">Subject</label>
                        <select class="form-control" id="support_subject" required>
                            <option value="">Select Issue Type</option>
                            <option value="account">Account & Login Issues</option>
                            <option value="purchase">Credit Purchase Issues</option>
                            <option value="payment">Payment & Billing</option>
                            <option value="technical">Technical Problems</option>
                            <option value="general">General Inquiry</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="support_priority" class="form-label">Priority</label>
                        <select class="form-control" id="support_priority" required>
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="support_message" class="form-label">Message</label>
                        <textarea class="form-control" id="support_message" rows="5" placeholder="Please describe your issue in detail..." required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="support_attachments" class="form-label">Attachments (Optional)</label>
                        <input type="file" class="form-control" id="support_attachments" multiple accept=".pdf,.jpg,.png,.doc,.docx">
                        <small class="text-muted">Max 5MB per file. Supported formats: PDF, JPG, PNG, DOC, DOCX</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="submitSupportRequest()">
                    <i class="fas fa-paper-plane me-2"></i>Send Request
                </button>
            </div>
        </div>
    </div>
</div>

<script>
function submitSupportRequest() {
    const form = document.getElementById('supportForm');
    const formData = new FormData(form);
    
    // Basic validation
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }
    
    // Show loading state
    const submitBtn = event.target;
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
    submitBtn.disabled = true;
    
    // Simulate form submission
    setTimeout(() => {
        $('#contactModal').modal('hide');
        
        // Show success message
        showAlert('success', 'Support request submitted successfully! We will respond within 24 hours.');
        
        // Reset form
        form.reset();
        
        // Reset button
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }, 2000);
}

function showAlert(type, message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
    alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    const container = document.querySelector('.container-fluid');
    container.insertBefore(alertDiv, container.firstChild);
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
        alertDiv.remove();
    }, 5000);
}
</script>
{% endblock %}